build --color=yes
# Build optimized releases.
# This will also test in optimized mode; we test exactly what we release.
build --compilation_mode=opt
# This takes advantage of srcfs immutability during the blaze load phase
build --experimental_srcfs_awareness
# Increase the maximum number of threads used by blaze.
build --jobs=500
# Cache the forward action graph across builds
build --keep_forward_graph
# Keep Blaze from spitting out INFO lines about how you're inheriting your rc
# settings.
build --noannounce_rc
# Increase the number of objfs cache hits by not stamping objects with the CL.
build --nostamp
# Builds and tests get this label so we can tell who isn't importing the
# standard riskops settings.
build --sponge_labels=RISKOPS_BLAZERC
# Upload results to sponge.
build --use_sponge=streamed

# Clean thoroughly and in the background so the action cache doesn't become
# too large.  You should clean your clients every couple of weeks.
clean --expunge_async

query --keep_going

# Tag test results appropriately.
test --sponge_labels=RISKOPS
test --test_output=errors
